# 更新日志

本文档记录本项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [0.2.0] - 2025-01-XX

### 新增
- 📊 **持仓和盈亏信息显示优化**
  - 持仓信息现在直接附加在价格信息下方，与其他信息保持一致的格式
  - 移除了独立的持仓信息区域样式，统一显示风格
  - 状态栏悬停提示（tooltip）中，持仓信息直接整合到主表格，优化显示效果

## [0.1.5] - 2025-11-03

### 修复
- 修复收盘时间状态栏未自动切换为"休市中"图标的问题
  - 当到达收盘时间且已开启"收盘停止更新"时，状态栏会自动更新为"休市中"或时钟图标
  - 修复了定时器停止时未更新状态栏显示的问题

## [0.1.4] - 2025-11-03

### 新增
- 👁️ **状态栏显示控制**：新增 `showStatusBar` 配置项，支持隐藏/显示状态栏股票信息
  - 隐藏后，设置图标（齿轮）仍然可见，方便重新显示
  - 可通过命令面板执行"股票: 切换状态栏显示"快速切换

## [0.1.3] - 2025-11-03

### 修复
- 修复腾讯数据源成交额单位错误的问题

## [0.1.2] - 2025-11-03

### 改进
- 同步更新文档和版本信息，保持项目文档一致性

## [0.1.1] - 2025-11-03

### 改进
- 优化打包配置，更新 `.vscodeignore` 排除测试和构建相关文件
- 增强 `package.json` 描述信息，更清晰地说明多市场支持功能
- 优化 README.md 文档，提升可读性和准确性

## [0.1.0] - 2025-11-03

### 新增
- 🧪 **单元测试支持**：集成 Jest 测试框架，提供完整的测试覆盖
  - 工具函数测试（格式化、市场时间判断等）
  - 配置管理测试（代码验证、配置更新等）
  - 数据服务测试（数据解析、格式化等）
  - 状态栏管理测试（显示逻辑、更新机制等）
- 📦 **包管理器迁移**：从 npm 迁移到 pnpm，提升依赖管理效率

### 改进
- 增强股票代码验证和格式化功能，支持更多股票格式
- 优化自动更新逻辑，改进非交易时间的处理机制
- 完善配置项说明，明确更新间隔最大值和收盘时间逻辑
- 优化状态栏显示逻辑，减少不必要的重绘
- 改进文档结构，增加多市场支持说明

### 修复
- 修复状态栏更新时的性能问题
- 修复配置变更时的状态同步问题

## [0.0.5] - 2025-11-03

### 新增
- 🌍 **多市场支持**：新增港股（10000+只）、美股（130+只）、指数（40+个）、ETF 支持
  - 港股代码格式：`hk00700`（5位数字）
  - 美股代码格式：`us.AAPL`（标准格式）
  - 支持北证50指数（`bj899050`）和北证50ETF（`sh562000-562999`）
- 🕐 **实时数据时间戳**：显示 API 返回的实际数据更新时间，而非本地时间
- 📅 **智能交易日判断**：基于数据时间戳自动识别交易日和节假日，更准确地判断市场开闭状态
- 📊 **成交量单位优化**：
  - 港美股使用"股"作为单位，A股使用"手"作为单位
  - 成交量达到亿单位时自动转换为"亿股"或"亿手"显示
- ⏸️ **更新间隔扩展**：最大更新间隔从默认值扩展到 30 分钟（1800秒）

### 改进
- 优化状态栏更新逻辑，减少非交易时间的"抖动"现象
- 改进收盘时间停止更新功能，基于实际数据时间戳判断市场状态
- 完善股票代码验证逻辑，支持港美股格式
- 优化港美股成交量和成交额的计算逻辑，确保数据准确性
- 扩展股票数据库，支持更多 ETF 段（510、562、588、159）

### 修复
- 修复港美股添加时没有生效的问题
- 修复港美股删除功能
- 修复港美股成交量和成交额不准确的问题
- 修复状态栏在非交易时间仍然"抖动"的问题
- 修复集合竞价时间被误判为非交易时间的问题

## [0.0.4] - 2025-11-02

### 新增
- ⏸️ **收盘时间自动停止更新**：支持在非交易时间自动暂停数据更新
- 📊 **详情面板视图切换**：支持卡片视图和表格视图切换
- 🎨 **显示位置配置**：支持在状态栏左侧或右侧显示（`alignment` 配置项）

### 改进
- 优化详情面板显示效果
- 改进错误处理和用户提示
- 优化配置项的组织结构

## [0.0.3] - 2025-11-02

### 新增
- 🔍 **智能搜索功能**：支持通过中文名称或编号模糊搜索添加股票
- 🗑️ **删除股票功能**：支持通过命令面板快速删除已添加的股票
- 📊 **详细信息面板**：点击状态栏可查看完整的股票数据表格
- 💾 **股票数据库缓存**：自动缓存股票列表，有效期7天，提升搜索速度

### 改进
- 优化股票代码标准化逻辑
- 改进状态栏工具提示显示
- 增强股票代码验证和错误处理

## [0.0.2] - 2025-11-02

### 新增
- 🎨 **彩色显示**：涨红跌绿，一目了然（`colorfulDisplay` 配置项）
- ⚙️ **显示内容控制**：独立控制是否显示名称、价格、涨跌幅
- ⌨️ **快捷键支持**：为常用功能配置快捷键
- 📈 **工具提示**：鼠标悬停状态栏显示详细行情数据
- 🔄 **自动更新**：支持配置更新间隔（`updateInterval` 配置项）
- 🔔 **提示气泡开关**：控制操作时是否显示提示（`showNotifications` 配置项）
- 🔀 **数据源切换**：支持腾讯财经和新浪财经数据源（`dataSource` 配置项）

### 改进
- 优化状态栏更新性能
- 改进配置管理逻辑
- 增强错误处理和网络请求重试

## [0.0.1] - 2025-11-01

### 新增
- 🎉 **初始版本发布**
- 📊 **基础功能**：在 VS Code 状态栏显示股票涨跌幅
- 💾 **配置管理**：支持通过 VS Code 设置配置股票代码
- 🔄 **数据刷新**：支持手动刷新股票数据
- 📝 **股票代码格式支持**：
  - 沪深A股：`sz000001`、`sh600000` 或纯数字格式
  - 北交所：`bj920001`
  - 支持中文名称配置

---

## 版本说明

- **[新增]**：新功能
- **[改进]**：已有功能的增强
- **[修复]**：问题修复
- **[移除]**：已移除的功能

[0.2.0]: https://github.com/MuWeiLiu66/stock-viewer/compare/v0.1.5...v0.2.0
[0.1.5]: https://github.com/MuWeiLiu66/stock-viewer/compare/v0.1.4...v0.1.5
[0.1.4]: https://github.com/MuWeiLiu66/stock-viewer/compare/v0.1.3...v0.1.4
[0.1.3]: https://github.com/MuWeiLiu66/stock-viewer/compare/v0.1.2...v0.1.3
[0.1.2]: https://github.com/MuWeiLiu66/stock-viewer/compare/v0.1.1...v0.1.2
[0.1.1]: https://github.com/MuWeiLiu66/stock-viewer/compare/v0.1.0...v0.1.1
[0.1.0]: https://github.com/MuWeiLiu66/stock-viewer/compare/v0.0.5...v0.1.0
[0.0.5]: https://github.com/MuWeiLiu66/stock-viewer/compare/v0.0.4...v0.0.5
[0.0.4]: https://github.com/MuWeiLiu66/stock-viewer/compare/v0.0.3...v0.0.4
[0.0.3]: https://github.com/MuWeiLiu66/stock-viewer/compare/v0.0.2...v0.0.3
[0.0.2]: https://github.com/MuWeiLiu66/stock-viewer/compare/v0.0.1...v0.0.2
[0.0.1]: https://github.com/MuWeiLiu66/stock-viewer/releases/tag/v0.0.1

